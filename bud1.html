<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ù†ØµØ© Ø¨ÙØ¹Ø¯ - Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: "Cairo", sans-serif; margin: 0; background: #1e272e; color: #ecf0f1; }
    header {
      background: linear-gradient(135deg,#6c5ce7,#00cec9);
      padding:20px; text-align:center; font-size:24px; font-weight:bold;
    }
    #map { height: 45vh; width: 100%; }
    #info { padding: 20px; }
    .card {
      background: #2f3640; padding: 15px; margin: 15px 0;
      border-radius: 12px; box-shadow:0 3px 10px rgba(0,0,0,0.3);
      transition: transform .3s;
    }
    .card:hover { transform: scale(1.01); }
    .btn {
      background: linear-gradient(135deg,#e67e22,#d35400);
      color:white; padding: 10px 16px; border:none;
      border-radius: 8px; cursor: pointer; font-size: 14px;
    }
    .btn:hover { transform: scale(1.05); }
    .equip img { width: 90px; margin: 5px; border-radius: 8px; }
    .timeline li {
      margin: 8px 0; padding: 8px; background: #353b48; border-radius: 6px;
      animation: fadeInUp .5s ease;
    }
    @keyframes fadeInUp { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
    .progress-bar { background:#353b48; border-radius:20px; overflow:hidden; height:18px; margin-top:10px; }
    .progress-fill { height:100%; background: linear-gradient(90deg,#00cec9,#6c5ce7); width:0%; transition: width 1.5s ease; }
    .grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap:15px; }
    .notif {
      background:#0984e3; padding:10px; border-radius:8px;
      margin:10px 0; font-size:14px; animation: fadeInUp .7s;
    }
  </style>
</head>
<body>

<header>ğŸ“ Ù…Ù†ØµØ© Ø¨ÙØ¹Ø¯ - Dashboard Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ Ù„Ù…ÙƒØ©</header>
<div id="map"></div>

<div id="info">
  <h2>ğŸ“Š Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ</h2>
  <div id="report" class="card">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø±ÙŠØ± ğŸ‘‡</div>

  <div id="premium" class="card hidden">
    <h3>ğŸ”’ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©</h3>
    <p>Ø§Ø´ØªØ±Ùƒ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµØ®ÙˆØ± â€¢ Ø§Ù„Ù…Ø¯Ø© â€¢ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª â€¢ Dashboard ÙƒØ§Ù…Ù„</p>
    <button class="btn" onclick="unlockPremium()">ğŸ’³ Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†</button>
  </div>

  <div id="dashboard" class="hidden">
    <div id="notifBox"></div>
    <div class="card" id="summary"></div>
    <div class="card" id="rocks"></div>
    <div class="card" id="equipments"></div>
    <div class="card">
      <h3>â³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ</h3>
      <ol id="timeline" class="timeline"></ol>
      <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    </div>

    <!-- Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ÙÙŠ Grid -->
    <div class="grid">
      <div class="card">
        <h3>ğŸ’° ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª</h3>
        <canvas id="costChart" height="150"></canvas>
      </div>
      <div class="card">
        <h3>ğŸ“Š ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ</h3>
        <canvas id="donutChart" height="150"></canvas>
      </div>
    </div>
  </div>
</div>

<script>
  let map;
  const haram = { lat: 21.4225, lng: 39.8262 };
  let currentReport = null;

  const mockReports = [
    {
      slope: "Ø¬Ø¨Ù„ÙŠØ©", cost: 200000, usage: "Ø³ÙƒÙ†ÙŠ", contractor: "Ø´Ø±ÙƒØ© Ù…Ù‚Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø­Ø±Ù…ÙŠÙ†",
      equipment: [
        { name: "ğŸšœ Ø­ÙØ§Ø±Ø© ØµØ®ÙˆØ±", img: "https://upload.wikimedia.org/wikipedia/commons/7/70/Excavator.jpg", price: 70000 },
        { name: "ğŸ›  Ø¬Ø±Ø§ÙØ©", img: "https://upload.wikimedia.org/wikipedia/commons/6/6e/Bulldozer.jpg", price: 50000 },
        { name: "ğŸ— Ù…Ø¹Ø¯Ø§Øª Ø­ÙØ±", img: "https://upload.wikimedia.org/wikipedia/commons/f/fc/Tower_crane.jpg", price: 30000 }
      ],
      steps: ["ğŸ“ Ù…Ø³Ø­ Ø§Ù„Ù…ÙˆÙ‚Ø¹", "â›° ÙƒØ³Ø± Ø§Ù„ØµØ®ÙˆØ±", "ğŸ— ØªÙ…Ù‡ÙŠØ¯ Ø§Ù„Ø£Ø±Ø¶", "ğŸ”Œ ØªÙˆØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª"],
      premium: { rocks: "Ø¬Ø±Ø§Ù†ÙŠØª + Ø¨Ø§Ø²Ø§Ù„Øª", duration: "90 ÙŠÙˆÙ…" }
    },
    {
      slope: "Ù…Ø³ØªÙˆÙŠØ©", cost: 120000, usage: "ØªØ¬Ø§Ø±ÙŠ", contractor: "Ù…Ø¤Ø³Ø³Ø© Ù…ÙƒØ© Ù„Ù„Ø¨Ù†Ø§Ø¡",
      equipment: [
        { name: "ğŸš§ Ø¬Ø±Ø§ÙØ© ØµØºÙŠØ±Ø©", img: "https://upload.wikimedia.org/wikipedia/commons/6/6e/Bulldozer.jpg", price: 40000 },
        { name: "ğŸ›  Ù…Ø¹Ø¯Ø§Øª ØªÙ…Ù‡ÙŠØ¯", img: "https://upload.wikimedia.org/wikipedia/commons/7/70/Excavator.jpg", price: 20000 }
      ],
      steps: ["ğŸ“ ØªØ³ÙˆÙŠØ© Ø§Ù„Ø£Ø±Ø¶", "ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¨Ø©", "ğŸ”Œ ØªÙˆØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª"],
      premium: { rocks: "ØªØ±Ø¨Ø© Ø±Ù…Ù„ÙŠØ© + Ø·ÙŠÙ†ÙŠØ©", duration: "45 ÙŠÙˆÙ…" }
    }
  ];

  function initMap() {
    map = new google.maps.Map(document.getElementById("map"), { center: haram, zoom: 13 });
    map.addListener("click", (e) => {
      currentReport = mockReports[Math.floor(Math.random() * mockReports.length)];
      document.getElementById("report").innerHTML = `
        <b>â›° Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³:</b> ${currentReport.slope} <br>
        <b>ğŸ’° ØªÙƒÙ„ÙØ© Ø§Ù„Ø£Ø±Ø¶:</b> ${currentReport.cost.toLocaleString()} Ø±ÙŠØ§Ù„ <br>
        <b>ğŸ¢ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:</b> ${currentReport.usage} <br>
        <b>ğŸ‘· Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„:</b> ${currentReport.contractor}
      `;
      document.getElementById("premium").classList.remove("hidden");
    });
  }

  function unlockPremium() {
    if (!currentReport) return;
    document.getElementById("dashboard").classList.remove("hidden");

    // Ø¥Ø´Ø¹Ø§Ø± Ø°ÙƒÙŠ
    document.getElementById("notifBox").innerHTML =
      `<div class="notif">ğŸ¤– ØªÙˆØµÙŠØ©: Ø£ÙØ¶Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ù„Ø£Ø±Ø¶ "${currentReport.usage}" Ù„Ø£Ù†Ù‡ ÙŠØ­Ù‚Ù‚ Ø¹Ø§Ø¦Ø¯ Ø£Ø¹Ù„Ù‰</div>`;

    // Ù…Ù„Ø®Øµ
    document.getElementById("summary").innerHTML = `
      <h3>ğŸ“‹ Ù…Ù„Ø®Øµ</h3>
      Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³: ${currentReport.slope}<br>
      Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…: ${currentReport.usage}<br>
      Ø§Ù„Ù…Ø¯Ø©: ${currentReport.premium.duration}
    `;

    // Ø§Ù„ØµØ®ÙˆØ±
    document.getElementById("rocks").innerHTML = `<h3>ğŸª¨ Ø§Ù„ØµØ®ÙˆØ±</h3>${currentReport.premium.rocks}`;

    // Ø§Ù„Ù…Ø¹Ø¯Ø§Øª
    document.getElementById("equipments").innerHTML =
      `<h3>âš’ï¸ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª</h3>` + currentReport.equipment.map(eq =>
        `<div><b>${eq.name}</b><br><img src="${eq.img}"><br>${eq.price.toLocaleString()} Ø±ÙŠØ§Ù„</div>`
      ).join("");

    // Timeline
    document.getElementById("timeline").innerHTML =
      currentReport.steps.map(step => `<li>${step}</li>`).join("");
    setTimeout(()=>{document.getElementById("progress").style.width="85%";},500);

    // Chart 1: Bar
    new Chart(document.getElementById("costChart"), {
      type: "bar",
      data: {
        labels: currentReport.equipment.map(eq=>eq.name),
        datasets: [{ data:currentReport.equipment.map(eq=>eq.price),
          backgroundColor:["#e67e22","#00cec9","#6c5ce7"] }]
      },
      options:{ plugins:{legend:{display:false}}, responsive:true, maintainAspectRatio:false }
    });

    // Chart 2: Doughnut
    new Chart(document.getElementById("donutChart"), {
      type:"doughnut",
      data:{
        labels:["Ù…Ø¹Ø¯Ø§Øª","Ø£ÙŠØ¯ÙŠ Ø¹Ø§Ù…Ù„Ø©","Ø®Ø¯Ù…Ø§Øª"],
        datasets:[{data:[currentReport.cost*0.5,currentReport.cost*0.3,currentReport.cost*0.2],
          backgroundColor:["#0984e3","#d63031","#00b894"]}]
      },
      options:{ responsive:true, maintainAspectRatio:false }
    });
  }
</script>

<script async
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDILbD7Q-_PAlMYY9KbaB3JDaNx_hdoYZw&callback=initMap">
</script>

</body>
</html>
