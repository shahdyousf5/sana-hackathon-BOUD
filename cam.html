<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø±Ø¶</title>
  <style>
    body { 
      font-family: "Tahoma", sans-serif; 
      direction: rtl; 
      background: #f9f9f9; 
      color: #333; 
      text-align: center; 
      margin: 0; 
      padding: 20px;
    }
    h2 { color: #2c3e50; }
    .container {
      background: #fff; 
      padding: 20px; 
      margin: auto; 
      max-width: 400px; 
      border-radius: 16px; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    video, canvas, img {
      width: 100%; 
      margin: 10px 0; 
      border-radius: 12px; 
      border: 1px solid #ddd;
    }
    button, input {
      padding: 12px 20px; 
      margin: 10px; 
      border: none; 
      border-radius: 8px; 
      font-size: 16px; 
      cursor: pointer;
    }
    button { background: #27ae60; color: white; }
    button:hover { background: #219150; }
    input { background: #ecf0f1; }
    .report {
      text-align: right; 
      margin-top: 15px; 
      padding: 15px; 
      background: #f4f6f7; 
      border-radius: 12px; 
      font-size: 15px; 
      line-height: 1.6;
    }
    .label { font-weight: bold; color: #2c3e50; }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ“ Ù…Ù†ØµØ© ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø±Ø¶ (ØªØ¬Ø±ÙŠØ¨ÙŠ)</h2>

    <!-- ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ -->
    <video id="camera" autoplay></video>
    <br>
    <button onclick="capture()">ğŸ“¸ Ø§Ù„ØªÙ‚Ø· ØµÙˆØ±Ø©</button>
    <br>

    <!-- Ø±ÙØ¹ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² -->
    <input type="file" id="upload" accept="image/*" onchange="uploadImage(event)">
    <br>

    <!-- Ù…ÙƒØ§Ù† Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© -->
    <canvas id="snapshot"></canvas>
    <img id="uploadedImg" style="display:none;"/>

    <h3>ğŸ“ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠ:</h3>
    <div id="report" class="report">Ù„Ù… ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ ØµÙˆØ±Ø© Ø¨Ø¹Ø¯.</div>
  </div>

<script>
  const video = document.getElementById('camera');
  const canvas = document.getElementById('snapshot');
  const ctx = canvas.getContext('2d');
  const uploadedImg = document.getElementById('uploadedImg');
  const reportBox = document.getElementById('report');

  // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => { video.srcObject = stream; })
    .catch(err => { console.log("Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØºÙŠØ± Ù…ØªØ§Ø­Ø©: ", err); });

  // Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
  function capture() {
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
    canvas.style.display = "block";
    uploadedImg.style.display = "none";
    generateReport();
  }

  // Ø±ÙØ¹ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø²
  function uploadImage(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        uploadedImg.src = e.target.result;
        uploadedImg.style.display = "block";
        canvas.style.display = "none";
        generateReport();
      };
      reader.readAsDataURL(file);
    }
  }

  // ØªÙ‚Ø±ÙŠØ± Ø£ÙˆÙ„ÙŠ ÙƒØ§Ù…Ù„ (Ù…Ø­Ø§ÙƒØ§Ø©)
  function generateReport() {
    const reports = [
      {
        type: "Ø¬Ø¨Ù„ÙŠØ© - ØµØ®ÙˆØ± Ø±Ø³ÙˆØ¨ÙŠØ©",
        slope: "Ø§Ù†Ø­Ø¯Ø§Ø± Ù…ØªÙˆØ³Ø· (15-25%)",
        cost: "ØªØ¬Ù‡ÙŠØ² Ù…ØªÙˆØ³Ø·ØŒ ÙŠØ­ØªØ§Ø¬ Ù…Ø¹Ø¯Ø§Øª ØªÙƒØ³ÙŠØ± Ø¹Ø§Ø¯ÙŠØ©",
        usage: "Ù…Ù†Ø§Ø³Ø¨ Ù„Ø¨Ù†Ø§Ø¡ ÙˆØ­Ø¯Ø§Øª Ø³ÙƒÙ†ÙŠØ© ØµØºÙŠØ±Ø©",
        risk: "Ø§Ù†Ø²Ù„Ø§Ù‚Ø§Øª Ø®ÙÙŠÙØ© Ù…Ø­ØªÙ…Ù„Ø© ÙÙŠ Ù…ÙˆØ³Ù… Ø§Ù„Ø£Ù…Ø·Ø§Ø±"
      },
      {
        type: "Ø£Ø±Ø¶ Ù…Ø³Ø·Ø­Ø© - ØªØ±Ø¨Ø© Ø±Ù…Ù„ÙŠØ©",
        slope: "Ø§Ù†Ø­Ø¯Ø§Ø± Ø¶Ø¹ÙŠÙ (Ø£Ù‚Ù„ Ù…Ù† 5%)",
        cost: "ØªÙƒÙ„ÙØ© ØªØ¬Ù‡ÙŠØ² Ù…Ù†Ø®ÙØ¶Ø©",
        usage: "Ù…Ù†Ø§Ø³Ø¨ Ù„Ø¨Ù†Ø§Ø¡ ØªØ¬Ø§Ø±ÙŠ Ø£Ùˆ Ø³ÙƒÙ†ÙŠ ÙƒØ¨ÙŠØ±",
        risk: "Ø«Ø¨Ø§Øª Ø¹Ø§Ù„ÙŠØŒ Ù…Ø®Ø§Ø·Ø± Ù‚Ù„ÙŠÙ„Ø©"
      },
      {
        type: "ØµØ®ÙˆØ± Ø¨Ø±ÙƒØ§Ù†ÙŠØ© ØµÙ„Ø¨Ø©",
        slope: "Ø§Ù†Ø­Ø¯Ø§Ø± Ø¹Ø§Ù„ÙŠ (Ø£ÙƒØ«Ø± Ù…Ù† 30%)",
        cost: "ØªÙƒÙ„ÙØ© ØªØ¬Ù‡ÙŠØ² Ù…Ø±ØªÙØ¹Ø© (Ù…Ø¹Ø¯Ø§Øª Ø­ÙØ± Ø®Ø§ØµØ©)",
        usage: "Ù…Ù†Ø§Ø³Ø¨ Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ù…Ø­Ø¯ÙˆØ¯Ø©",
        risk: "Ù…Ø®Ø§Ø·Ø± ØªØ¢ÙƒÙ„ ÙˆØªÙƒØ³ÙŠØ± Ù…Ø±ØªÙØ¹Ø©"
      },
      {
        type: "Ø£Ø±Ø¶ Ø´Ø¨Ù‡ Ø¬Ø¨Ù„ÙŠØ© - ØªØ±Ø¨Ø© Ø·ÙŠÙ†ÙŠØ©",
        slope: "Ø§Ù†Ø­Ø¯Ø§Ø± Ù…ØªÙˆØ³Ø· (10-20%)",
        cost: "Ù…ØªÙˆØ³Ø·Ø© Ù…Ø¹ Ø­Ø§Ø¬Ø© Ù„ØªØ¯Ø¹ÙŠÙ… Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨",
        usage: "Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø²Ø±Ø§Ø¹Ø© Ø£Ùˆ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨ÙŠØ¦ÙŠØ©",
        risk: "Ù‚Ø§Ø¨Ù„ÙŠØ© Ù„Ø§Ù†Ø²Ù„Ø§Ù‚Ø§Øª Ù…ØªÙˆØ³Ø·Ø©"
      }
    ];
    const r = reports[Math.floor(Math.random() * reports.length)];
    reportBox.innerHTML = `
      <p><span class="label">Ù†ÙˆØ¹ Ø§Ù„Ø£Ø±Ø¶:</span> ${r.type}</p>
      <p><span class="label">Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù†Ø­Ø¯Ø§Ø±:</span> ${r.slope}</p>
      <p><span class="label">ØªÙ‚Ø¯ÙŠØ± ØªÙƒÙ„ÙØ© Ø§Ù„ØªØ¬Ù‡ÙŠØ²:</span> ${r.cost}</p>
      <p><span class="label">Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ù…Ø«Ù„:</span> ${r.usage}</p>
      <p><span class="label">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±:</span> ${r.risk}</p>
    `;
  }
</script>
</body>
</html>
